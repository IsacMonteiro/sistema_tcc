{"ast":null,"code":"import { useAutorStore } from \"../../store/autorStore\";\nimport { useOrientadorStore } from \"../../store/orientadorStore\"; // Importando a store dos orientadores\nimport { useObraStore } from \"../../store/obraStore\"; // Importando a store das obras\nimport { useCursoStore } from \"../../store/cursoStore\"; // Importando a store dos cursos\nimport { onMounted, ref, computed } from \"vue\";\nexport default {\n  setup() {\n    const autorStore = useAutorStore();\n    const orientadorStore = useOrientadorStore(); // Acesso à store dos orientadores\n    const obraStore = useObraStore(); // Acesso à store das obras\n    const cursoStore = useCursoStore(); // Acesso à store dos cursos\n    const autores = ref([]);\n    const orientadores = ref([]);\n    const tiposDeObra = ref([]);\n    const cursos = ref([]);\n    const obras = ref([]);\n\n    // Carrega os autores, orientadores, tipos de obras, cursos e obras\n    onMounted(async () => {\n      try {\n        await autorStore.listarAutores();\n        autores.value = autorStore.autores;\n        console.log(\"Autores carregados:\", autores.value);\n        await orientadorStore.listarOrientadores(); // Carrega os orientadores\n        orientadores.value = orientadorStore.orientadores;\n        console.log(\"Orientadores carregados:\", orientadores.value);\n        await obraStore.listarObras(); // Carrega as obras\n        obras.value = obraStore.obras; // Armazena as obras para acessar títulos e anos\n        tiposDeObra.value = obras.value.map(obra => obra.tipo); // Extrai os tipos das obras\n        console.log(\"Tipos de Obra carregados:\", tiposDeObra.value);\n        await cursoStore.listarCursos(); // Carrega os cursos\n        cursos.value = cursoStore.cursos;\n        console.log(\"Cursos carregados:\", cursos.value);\n      } catch (error) {\n        console.error(\"Erro ao carregar dados:\", error);\n      }\n    });\n    const buttons = [\"Autor\", \"Título\", \"Áreas de Conhecimento - Cursos\",\n    // Agora com a lista de cursos\n    \"Data de Defesa\",\n    // Atualizado para incluir o campo de Data de Defesa\n    \"Orientador\", \"Tipo de Obra\"];\n    const dropdowns = ref([false, false, false, false, false, false]);\n    const dropdownOptions = [[],\n    // Opções de autores\n    [],\n    // Opções de títulos\n    [],\n    // Opções de cursos\n    [],\n    // Opções de datas (ano)\n    [],\n    // Opções de orientadores\n    [] // Opções de tipos de obras\n    ];\n    const toggleDropdown = index => {\n      dropdowns.value[index] = !dropdowns.value[index];\n    };\n\n    // Função para formatar o nome conforme o desejado\n    const formatName = fullName => {\n      const nameParts = fullName.split(\" \");\n      const lastName = nameParts.pop(); // Último nome (sobrenome)\n      const firstName = nameParts.join(\" \"); // O restante do nome\n\n      return `${lastName}, ${firstName}`; // Sobrenome, nome\n    };\n\n    // Funções computadas para garantir a ordenação e o limite de 7 itens\n    const sortedAutores = computed(() => {\n      return autores.value.sort((a, b) => a.nome_autor.localeCompare(b.nome_autor)).slice(0, 7);\n    });\n    const sortedObras = computed(() => {\n      return obras.value.sort((a, b) => a.titulo.localeCompare(b.titulo)).slice(0, 7);\n    });\n    const sortedCursos = computed(() => {\n      return cursos.value.sort((a, b) => a.nome_curso.localeCompare(b.nome_curso)).slice(0, 7);\n    });\n    const sortedOrientadores = computed(() => {\n      return orientadores.value.sort((a, b) => a.nome_orientador.localeCompare(b.nome_orientador)).slice(0, 7);\n    });\n    const sortedTiposDeObra = computed(() => {\n      return tiposDeObra.value.sort().slice(0, 7);\n    });\n    return {\n      autores,\n      orientadores,\n      tiposDeObra,\n      cursos,\n      obras,\n      buttons,\n      dropdowns,\n      dropdownOptions,\n      toggleDropdown,\n      formatName,\n      // Função para formatar o nome\n      sortedAutores,\n      sortedObras,\n      sortedCursos,\n      sortedOrientadores,\n      sortedTiposDeObra\n    };\n  }\n};","map":{"version":3,"names":["useAutorStore","useOrientadorStore","useObraStore","useCursoStore","onMounted","ref","computed","setup","autorStore","orientadorStore","obraStore","cursoStore","autores","orientadores","tiposDeObra","cursos","obras","listarAutores","value","console","log","listarOrientadores","listarObras","map","obra","tipo","listarCursos","error","buttons","dropdowns","dropdownOptions","toggleDropdown","index","formatName","fullName","nameParts","split","lastName","pop","firstName","join","sortedAutores","sort","a","b","nome_autor","localeCompare","slice","sortedObras","titulo","sortedCursos","nome_curso","sortedOrientadores","nome_orientador","sortedTiposDeObra"],"sources":["C:\\Users\\Micro\\Music\\sistema_tcc\\aplicacao\\frontend\\src\\components\\lista\\ListaSuspensa.vue"],"sourcesContent":["<template>\r\n  <v-container class=\"d-flex flex-column align-center gap-4\">\r\n    <!-- Botões com Lista Suspensa -->\r\n    <v-row class=\"button-container\" justify=\"center\" align=\"center\">\r\n      <v-col\r\n        v-for=\"(item, index) in buttons\"\r\n        :key=\"index\"\r\n        cols=\"12\"\r\n        md=\"4\"\r\n        class=\"mb-4\"\r\n      >\r\n        <!-- Botão Principal -->\r\n        <v-btn\r\n          class=\"filter-button\"\r\n          elevation=\"2\"\r\n          dark\r\n          block\r\n          @click=\"toggleDropdown(index)\"\r\n        >\r\n          <!-- Ícone à Esquerda -->\r\n          <v-icon class=\"me-2\">\r\n            {{ dropdowns[index] ? 'mdi-minus' : 'mdi-plus' }}\r\n          </v-icon>\r\n          <span>{{ item }}</span>\r\n        </v-btn>\r\n\r\n        <!-- Lista Suspensa -->\r\n        <v-expand-transition>\r\n          <div v-if=\"dropdowns[index]\" class=\"dropdown-list\">\r\n            <!-- Conteúdo da Lista -->\r\n            <ul v-if=\"index === 0\"> <!-- Só renderiza a lista de autores no primeiro dropdown -->\r\n              <li v-for=\"(autor, idx) in sortedAutores\" :key=\"idx\">\r\n                {{ formatName(autor.nome_autor) }} <!-- Exibe o nome do autor formatado -->\r\n              </li>\r\n            </ul>\r\n\r\n            <!-- Lista Suspensa dos Títulos -->\r\n            <ul v-if=\"index === 1\"> <!-- Só renderiza a lista de títulos no segundo dropdown -->\r\n              <li v-for=\"(obra, idx) in sortedObras\" :key=\"idx\">\r\n                {{ obra.titulo }} <!-- Exibe título da obra -->\r\n              </li>\r\n            </ul>\r\n\r\n            <!-- Lista Suspensa das Datas de Defesa -->\r\n            <ul v-if=\"index === 3\"> <!-- Só renderiza a lista de datas de defesa no quarto dropdown -->\r\n              <li v-for=\"(obra, idx) in sortedObras\" :key=\"idx\">\r\n                {{ new Date(obra.data_apresentacao).getFullYear() }} <!-- Exibe apenas o ano da data de apresentação -->\r\n              </li>\r\n            </ul>\r\n\r\n            <!-- Lista Suspensa dos Cursos -->\r\n            <ul v-if=\"index === 2\"> <!-- Só renderiza a lista de cursos no terceiro dropdown -->\r\n              <li v-for=\"(curso, idx) in sortedCursos\" :key=\"idx\">\r\n                {{ curso.nome_curso }} <!-- Exibe o nome do curso -->\r\n              </li>\r\n            </ul>\r\n\r\n            <!-- Lista Suspensa dos Orientadores -->\r\n            <ul v-if=\"index === 4\"> <!-- Só renderiza a lista de orientadores no quinto dropdown -->\r\n              <li v-for=\"(orientador, idx) in sortedOrientadores\" :key=\"idx\">\r\n                {{ formatName(orientador.nome_orientador) }} <!-- Exibe o nome do orientador formatado -->\r\n              </li>\r\n            </ul>\r\n\r\n            <!-- Lista Suspensa dos Tipos de Obras -->\r\n            <ul v-if=\"index === 5\"> <!-- Só renderiza a lista de tipos de obras no sexto dropdown -->\r\n              <li v-for=\"(tipo, idx) in sortedTiposDeObra\" :key=\"idx\">\r\n                {{ tipo }} <!-- Exibe o tipo de obra -->\r\n              </li>\r\n            </ul>\r\n\r\n            <!-- Outras opções para os outros botões -->\r\n            <ul v-else>\r\n              <li v-for=\"(option, idx) in dropdownOptions[index]\" :key=\"idx\">\r\n                {{ option }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </v-expand-transition>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { useAutorStore } from \"../../store/autorStore\";\r\nimport { useOrientadorStore } from \"../../store/orientadorStore\"; // Importando a store dos orientadores\r\nimport { useObraStore } from \"../../store/obraStore\"; // Importando a store das obras\r\nimport { useCursoStore } from \"../../store/cursoStore\"; // Importando a store dos cursos\r\nimport { onMounted, ref, computed } from \"vue\";\r\n\r\nexport default {\r\n  setup() {\r\n    const autorStore = useAutorStore();\r\n    const orientadorStore = useOrientadorStore(); // Acesso à store dos orientadores\r\n    const obraStore = useObraStore(); // Acesso à store das obras\r\n    const cursoStore = useCursoStore(); // Acesso à store dos cursos\r\n    const autores = ref([]);\r\n    const orientadores = ref([]);\r\n    const tiposDeObra = ref([]);\r\n    const cursos = ref([]);\r\n    const obras = ref([]);\r\n\r\n    // Carrega os autores, orientadores, tipos de obras, cursos e obras\r\n    onMounted(async () => {\r\n      try {\r\n        await autorStore.listarAutores();\r\n        autores.value = autorStore.autores;\r\n        console.log(\"Autores carregados:\", autores.value);\r\n\r\n        await orientadorStore.listarOrientadores(); // Carrega os orientadores\r\n        orientadores.value = orientadorStore.orientadores;\r\n        console.log(\"Orientadores carregados:\", orientadores.value);\r\n\r\n        await obraStore.listarObras(); // Carrega as obras\r\n        obras.value = obraStore.obras; // Armazena as obras para acessar títulos e anos\r\n        tiposDeObra.value = obras.value.map(obra => obra.tipo); // Extrai os tipos das obras\r\n        console.log(\"Tipos de Obra carregados:\", tiposDeObra.value);\r\n\r\n        await cursoStore.listarCursos(); // Carrega os cursos\r\n        cursos.value = cursoStore.cursos;\r\n        console.log(\"Cursos carregados:\", cursos.value);\r\n      } catch (error) {\r\n        console.error(\"Erro ao carregar dados:\", error);\r\n      }\r\n    });\r\n\r\n    const buttons = [\r\n      \"Autor\",\r\n      \"Título\",\r\n      \"Áreas de Conhecimento - Cursos\", // Agora com a lista de cursos\r\n      \"Data de Defesa\", // Atualizado para incluir o campo de Data de Defesa\r\n      \"Orientador\",\r\n      \"Tipo de Obra\",\r\n    ];\r\n\r\n    const dropdowns = ref([false, false, false, false, false, false]);\r\n    const dropdownOptions = [\r\n      [], // Opções de autores\r\n      [], // Opções de títulos\r\n      [], // Opções de cursos\r\n      [], // Opções de datas (ano)\r\n      [], // Opções de orientadores\r\n      [],  // Opções de tipos de obras\r\n    ];\r\n\r\n    const toggleDropdown = (index) => {\r\n      dropdowns.value[index] = !dropdowns.value[index];\r\n    };\r\n\r\n    // Função para formatar o nome conforme o desejado\r\n    const formatName = (fullName) => {\r\n      const nameParts = fullName.split(\" \");\r\n      const lastName = nameParts.pop(); // Último nome (sobrenome)\r\n      const firstName = nameParts.join(\" \"); // O restante do nome\r\n\r\n      return `${lastName}, ${firstName}`; // Sobrenome, nome\r\n    };\r\n\r\n    // Funções computadas para garantir a ordenação e o limite de 7 itens\r\n    const sortedAutores = computed(() => {\r\n      return autores.value.sort((a, b) => a.nome_autor.localeCompare(b.nome_autor)).slice(0, 7);\r\n    });\r\n\r\n    const sortedObras = computed(() => {\r\n      return obras.value.sort((a, b) => a.titulo.localeCompare(b.titulo)).slice(0, 7);\r\n    });\r\n\r\n    const sortedCursos = computed(() => {\r\n      return cursos.value.sort((a, b) => a.nome_curso.localeCompare(b.nome_curso)).slice(0, 7);\r\n    });\r\n\r\n    const sortedOrientadores = computed(() => {\r\n      return orientadores.value.sort((a, b) => a.nome_orientador.localeCompare(b.nome_orientador)).slice(0, 7);\r\n    });\r\n\r\n    const sortedTiposDeObra = computed(() => {\r\n      return tiposDeObra.value.sort().slice(0, 7);\r\n    });\r\n\r\n    return {\r\n      autores,\r\n      orientadores,\r\n      tiposDeObra,\r\n      cursos,\r\n      obras,\r\n      buttons,\r\n      dropdowns,\r\n      dropdownOptions,\r\n      toggleDropdown,\r\n      formatName, // Função para formatar o nome\r\n      sortedAutores,\r\n      sortedObras,\r\n      sortedCursos,\r\n      sortedOrientadores,\r\n      sortedTiposDeObra,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.button-container {\r\n  margin-top: 20px;\r\n}\r\n\r\n/* Estilo dos botões */\r\n.filter-button {\r\n  width: 100%;\r\n  background-color: #00420c;\r\n  color: #fff;\r\n  height: 50px;\r\n  text-transform: none;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  padding: 0 16px;\r\n}\r\n\r\n/* Hover: botão muda de cor ao passar o mouse */\r\n.filter-button:hover {\r\n  background-color: #001a05;\r\n}\r\n\r\n/* Lista Suspensa */\r\n.dropdown-list {\r\n  background: #e0f2f1; /* Fundo da lista */\r\n  border-radius: 8px;\r\n  padding: 8px 16px;\r\n  margin-top: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n/* Estilo dos itens na lista */\r\n.dropdown-list ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.dropdown-list li {\r\n  font-size: 14px;\r\n  margin-bottom: 4px;\r\n  color: #004d40;\r\n}\r\n\r\n.dropdown-list li:last-child {\r\n  margin-bottom: 0;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}